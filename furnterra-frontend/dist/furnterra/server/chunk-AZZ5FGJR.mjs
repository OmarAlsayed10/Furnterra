import './polyfills.server.mjs';
import{a as w,b as s,c as F,d as L,e as E,f as y,g as k,i as A,j as N,k as T,l as R}from"./chunk-KXJKBTJQ.mjs";import{A as S,C,D as b,z as h}from"./chunk-RRDARBPN.mjs";import{$a as o,Ba as d,Ga as x,La as p,Va as c,Xa as u,ab as n,bb as g,db as f,eb as _,ib as r,wa as a}from"./chunk-7JXXYRXS.mjs";import"./chunk-X2SEQXRR.mjs";function q(i,l){i&1&&r(0," Email is Required ")}function j(i,l){i&1&&r(0," Please Enter a Valid Email ")}function D(i,l){if(i&1&&(o(0,"p",6),p(1,q,1,0)(2,j,1,0),n()),i&2){let t,e,m=_();a(),u(!((t=m.loginForm.get("email"))==null||t.errors==null)&&t.errors.required?1:-1),a(),u(!((e=m.loginForm.get("email"))==null||e.errors==null)&&e.errors.email?2:-1)}}function I(i,l){i&1&&r(0," password is required ")}function M(i,l){if(i&1&&(o(0,"p",6),p(1,I,1,0),n()),i&2){let t,e=_();a(),u(!((t=e.loginForm.get("password"))==null||t.errors==null)&&t.errors.required?1:-1)}}var G=class i{constructor(l,t,e,m){this.fb=l;this.auth=t;this.route=e;this.alert=m;this.loginForm=this.fb.group({email:["",[s.required,s.email]],password:["",[s.required,s.minLength(8),s.pattern("^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,}$")]]})}loginForm;onSubmit(){if(!this.loginForm.valid){this.loginForm.markAllAsTouched();return}let{email:l,password:t}=this.loginForm.value;this.auth.login({email:l,password:t}).subscribe({next:e=>{if(!e.access_token){this.alert.show("user doesn't exist","error");return}this.auth.setToken(e.access_token),this.route.navigate(["/"])},error:e=>{console.log(JSON.stringify(e)),this.alert.show("email or password is wrong !","error")}})}googleSubmit(){this.auth.googleLogin()}static \u0275fac=function(t){return new(t||i)(d(A),d(b),d(h),d(T))};static \u0275cmp=x({type:i,selectors:[["app-login"]],decls:29,vars:5,consts:[[1,"min-h-screen","flex","items-center","justify-center","p-4"],[1,"w-full","max-w-md","shadow","rounded","p-6"],[1,"text-center","font-bold","text-2xl"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["type","email","formControlName","email",1,"w-full","border","p-2","rounded"],[1,"text-red-500","text-sm"],["type","password","formControlName","password",1,"w-full","border","p-2","rounded","focus:outline-none"],["type","submit",1,"w-full","bg-emerald-600","text-white","hover:bg-emerald-800","rounded","transition","px-2","cursor-pointer"],[1,"my-4","text-center","text-gray-500","text-sm"],[1,"w-full","bg-emerald-600","text-white","hover:bg-emerald-800","rounded","transition","px-2","cursor-pointer",3,"click"],[1,"text-center","mt-4","text-gray-500"],[1,"text-emerald-800","underline",3,"routerLink"],[1,"text-center","text-emerald-800","cursor-pointer",3,"routerLink"],[1,"fixed","bottom-4","left-1/2","transform","-translate-x-1/2","z-50"]],template:function(t,e){if(t&1&&(o(0,"div",0)(1,"div",1)(2,"h2",2),r(3,"Login"),n(),o(4,"form",3),f("ngSubmit",function(){return e.onSubmit()}),o(5,"div",4)(6,"label"),r(7,"Email"),n(),g(8,"input",5),p(9,D,3,2,"p",6),n(),o(10,"div",4)(11,"label"),r(12,"Password"),n(),g(13,"input",7),p(14,M,2,1,"p",6),n(),o(15,"button",8),r(16," Login "),n(),o(17,"div",9),r(18,"OR"),n(),o(19,"button",10),f("click",function(){return e.googleSubmit()}),r(20," Login with Google "),n()(),o(21,"p",11),r(22,"don't have an account? "),o(23,"a",12),r(24,"Sign up"),n()(),o(25,"p",13),r(26,"forgot password?"),n(),o(27,"div",14),g(28,"app-alert"),n()()()),t&2){let m,v;a(4),c("formGroup",e.loginForm),a(5),u(e.loginForm.touched&&((m=e.loginForm.get("email"))!=null&&m.invalid)?9:-1),a(5),u(e.loginForm.touched&&((v=e.loginForm.get("password"))!=null&&v.invalid)?14:-1),a(9),c("routerLink","/register"),a(2),c("routerLink","/")}},dependencies:[N,E,w,F,L,y,k,C,S,R],encapsulation:2})};export{G as LoginComponent};
